<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>ECB - the Emacs Code Browser: ecb-directories</title>

<meta name="description" content="ECB - the Emacs Code Browser: ecb-directories">
<meta name="keywords" content="ECB - the Emacs Code Browser: ecb-directories">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="ecb.html#Top" rel="start" title="Top">
<link href="Command-Index.html#Command-Index" rel="index" title="Command Index">
<link href="Concept-Index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Customizable-options.html#Customizable-options" rel="up" title="Customizable options">
<link href="ecb_002dsources.html#ecb_002dsources" rel="next" title="ecb-sources">
<link href="ecb_002dtree_002dbuffer.html#ecb_002dtree_002dbuffer" rel="prev" title="ecb-tree-buffer">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="ecb_002ddirectories"></a>
<div class="header">
<p>
Next: <a href="ecb_002dsources.html#ecb_002dsources" accesskey="n" rel="next">ecb-sources</a>, Previous: <a href="ecb_002dtree_002dbuffer.html#ecb_002dtree_002dbuffer" accesskey="p" rel="prev">ecb-tree-buffer</a>, Up: <a href="Customizable-options.html#Customizable-options" accesskey="u" rel="up">Customizable options</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html#Command-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Group-ecb_002ddirectories"></a>
<h4 class="subsection">7.3.3 Group ecb-directories</h4>

<p>This group contains settings for the directories-buffer in the ECB:
</p>
<dl>
<dt><a name="index-add_002dpath_002dfor_002dnot_002dmatching_002dfiles"></a>User Option: <strong>add-path-for-not-matching-files</strong></dt>
<dd><p>Add path of a file to <code>ecb-source-path</code> if not already contained.
This is done during the auto. windows synchronization which happens if
a file is opened not via the file/directory-browser of ECB. In such a
situation ECB adds the path of the new file auto. to
<code>ecb-source-path</code> at least temporally for the current Emacs
session. This option defines two things:
</p>
<ol>
<li> Should only the root-part (which means for Unix-like systems always
&rsquo;/&rsquo; and for windows-like systems the drive) of the new file be added
as source-path to <code>ecb-source-path</code> or the whole directory-part?
For remote-files (e.g. tramp, ange-ftp- or efs-files) the root-part is
the complete host-part + the root-dir at that host (example:
/berndl@ecb.sourceforge.net:/ would be the root-part of
/berndl@ecb.sourceforge.net:/tmp/test.txt).
</li><li> Should this path be added for future sessions too?
</li></ol>

<p>The value of this option is a cons-cell where the car is a boolean for
1. and the cdr is a boolean for 2.
</p>
<p>A value of not nil for the car (1.) is reasonably if a user often
opens files not via the ECB-browser which are not located in any of
the paths of <code>ecb-source-path</code> because then only one path for
each drive (windows) or the root-path (Unix) is added to the directory
buffer of ECB.
</p></dd></dl>

<dl>
<dt><a name="index-auto_002dexpand_002ddirectory_002dtree"></a>User Option: <strong>auto-expand-directory-tree</strong></dt>
<dd><p>Automatically expand the directory tree to the current source file.
There are three options:
</p>
<ul class="no-bullet">
<li>- <code>best</code>: Expand the best-matching source-path
</li><li>- <code>first</code>: Expand the first matching source-path
</li><li>- <code>nil</code>: Do not automatically expand the directory tree.
</li></ul>
</dd></dl>

<dl>
<dt><a name="index-after_002ddirectory_002dchange_002dhook"></a>User Option: <strong>after-directory-change-hook</strong></dt>
<dd><p>Hook which run directly after the selected directory has changed. This means
not onyl after a click onto a directory in the directory-window of ECB but it
means this hook runs always when the current directory changes regardless of
the trigger of this change. So for example it runs also when you just switches
from one buffer to another via <code>switch-to-buffer</code> or
<code>switch-to-buffer-other-window</code> and the directory of these filebuffers is
different but only when auto-synchronizing of the ECB-windows is on (see
<code>ecb-basic-buffer-sync</code>). It runs not when switching between buffers and
the associated files reside in the same directory.
</p>
<p>Each function added to this hook will be called with two arguments:
The directory which was current _before_ the directory-change-trigger
and the directory which was now the current (i.e. after the trigger).
</p>
<p>Example: If you switch from a filebuffer &ldquo;~/.emacs&rdquo; to a filebuffer
&ldquo;/tmp/test.txt&rdquo; then the functions of this hook will be called with
the two arguments &ldquo;~&rdquo; and &ldquo;/tmp&rdquo;.
</p></dd></dl>



<dl>
<dt><a name="index-cache_002ddirectory_002dcontents"></a>User Option: <strong>cache-directory-contents</strong></dt>
<dd><p>Cache contents of directories.
</p>
<p>This can be useful if <code>ecb-source-path</code> contains directories with
many files and subdirs, especially if these directories are mounted
net-drives (&ldquo;many&rdquo; means here something &gt; 500, dependent of the
speed of the net-connection and the machine). Or if it contains
remote-source-paths which means paths in the sense of tramp, ange-ftp
or efs. For these directories actualizing the sources- and/or
directories- buffer of ECB (if displayed in current layout!) can slow
down dramatically so a caching increases speed a lot.
</p> 
<p>The value of this option is a list where each element is a cons-cell
and looks like:
</p>
<div class="example">
<pre class="example">  (&lt;dir-regexp&gt; . &lt;filenumber threshold&gt;) with
</pre></div>

<dl compact="compact">
<dt><code>&lt;dir-regexp&gt;:</code></dt>
<dd><p>Regular expression a directory must match to be cached.
</p></dd>
<dt><code>&lt;filenumber threshold&gt;:</code></dt>
<dd><p>Number of directory contents must exceed this number.
</p></dd>
</dl>

<p>A directory will only be cached if and only if the directory-name
matches at least one rexexp of this option and its content-number
exceeds the related threshold AND the directory-name matches NOT any
regexp of <code>ecb-cache-directory-contents-not</code>!
</p>
<p>The cache entry for a certain directory will be refreshed and
actualized only by using the POWER-click (see
<code>ecb-primary-secondary-mouse-buttons</code>) in the directories-buffer
of ECB (see <a href="Using-the-mouse.html#Using-the-mouse">Using the mouse</a>).
</p>
<p>Default-value: ECB caches the contents of all remote directories
regardless of the size and all other directories if more than 50
entries are contained.
</p>
<p>Examples:
</p>
<p>An entry <code>(&quot;/usr/home/john_smith/bigdir*&quot; . 1000)</code> means the
contents of every subdirectory of the home-directory of John Smith
will be cached if the directory contains more than 1000 entries and
its name begins with &ldquo;bigdir&rdquo;.
</p>
<p>An entry <code>(&quot;.*&quot; . 1000)</code> caches every directory which has more
than 1000 entries.
</p>
<p>An entry <code>(&quot;^/\\([^:/]*@\\)?\\([^@:/]*\\):.*&quot; . 0)</code> caches
every remote (in the sense of tramp, ange-ftp or efs) directory
regardless of the number of entries.&quot;
</p>
<p>Please note: If you want your home-dir being cached then you MUST NOT
use &ldquo;~&rdquo; because ECB tries always to match full path-names!
</p></dd></dl>

<dl>
<dt><a name="index-cache_002ddirectory_002dcontents_002dnot"></a>User Option: <strong>cache-directory-contents-not</strong></dt>
<dd><p>Do not cache the contents of certain directories. The value of this
option is a list where the each element is a regular expression a
directory must match if it should not being cached.
</p>
<p>If a directory-name matches at least one of the regexps of this option
the directory-contents will never being cached. See
<code>ecb-cache-directory-contents</code> to see when a directory will be
cached.
</p>
<p>This option can be useful when normally all directories with a certain
amount of content (files and subdirs) should be cached but some
special directories not. This can be achieved by:
</p>
<ul class="no-bullet">
<li>- Setting <code>ecb-cache-directory-contents</code> to ((&ldquo;.*&rdquo; . 500)):
Caches all directories with more then 500 entries

</li><li>- Setting <code>ecb-cache-directory-contents-not</code> to a value which
matches these directories which should not being cached (e.g.
(&ldquo;/usr/home/john_smith&rdquo;) excludes the HOME-directory of John Smith
from being cached).
</li></ul>

<p>Please note: If you want your home-dir exclude from being cached then
you MUST NOT use &ldquo;~&rdquo; because ECB tries always to match full
path-names!
</p></dd></dl>



<dl>
<dt><a name="index-directories_002dbuffer_002dafter_002dcreate_002dhook"></a>User Option: <strong>directories-buffer-after-create-hook</strong></dt>
<dd><p>Local hook running after the creation of the directories-buffer. Every
function of this hook is called once without arguments direct after
creating the directories-buffer of ECB and it&rsquo;s local key-map. So for
example a function could be added which performs calls of
<code>local-set-key</code> to define new keybindings only for the
directories-buffer of ECB.
</p>
<p>The following keys must not be rebind in the directories-buffer:
<kbd>F2</kbd>, <kbd>F3</kbd> and <kbd>F4</kbd>
</p></dd></dl>


<dl>
<dt><a name="index-directories_002dbuffer_002dname"></a>User Option: <strong>directories-buffer-name</strong></dt>
<dd><p>Name of the ECB directory buffer. Because it is not a normal buffer
for editing you should enclose the name with stars, e.g. &ldquo; *ECB
Directories*&rdquo;.
</p>
<p>If it is necessary for you you can get emacs-lisp access to the buffer-object of
the ECB-directory-buffer by this name, e.g. by a call of <code>set-buffer</code>.
</p>
<p>Changes for this option at runtime will take affect only after
deactivating and then activating ECB again!
</p></dd></dl>

<dl>
<dt><a name="index-directories_002dmenu_002dsorter"></a>User Option: <strong>directories-menu-sorter</strong></dt>
<dd><p>Function which re-sorts the menu-entries of the directories buffer.
</p>
<p>If a function then this function is called to re-arrange the
menu-entries of the combined menu-entries of the user-menu-extensions
of <code>ecb-directories-menu-user-extension</code> and the built-in-menu
<code>ecb-directories-menu</code>. If nil then no special sorting will be
done and the user-extensions are placed in front of the
built-in-entries.
</p>
<p>The function get one argument, a list of menu-entries. For the format
of this argument see <code>ecb-directories-menu-user-extension</code>. The
function must return a new list in the same format. Of course this
function can not only re-arrange the entries but also delete entries
or add new entries.
</p></dd></dl>


<dl>
<dt><a name="index-directories_002dmenu_002duser_002dextension"></a>User Option: <strong>directories-menu-user-extension</strong></dt>
<dd><p>Static user extensions for the popup-menu of the directories buffer.
Value is a list of elements of the following type: Each element
defines a new menu-entry and is either:
</p>
<ol>
<li> Menu-command:
A list containing two sub-elements, whereas the first is the function
(a function symbol) being called if the menu-entry is selected and the
second is the name of the menu-entry.

</li><li> Separator:
A one-element-list and the element is the string &ldquo;&mdash;&rdquo;: Then a
non-selectable menu-separator is displayed.

</li><li> Submenu:
A list where the first element is the title of the submenu displayed
in the main-menu and all other elements are either menu-commands (see
1) or separators (see 2) or another submenu (see c). This allows deep
nested menu-submenu-structures. Currently a level of 4 is allowed but
in general there could be an infinite depth of nesting but it makes no
sense - if possible at all - to define infinite nested
defcustom-types. So there is a limit of 4 levels but tis is not a hard
limit: Just increase the value of the <code>ecb-max-submenu-depth</code>
<strong>BEFORE</strong> first loading ECB!
</li></ol>

<p>The function of a menu-command must follow the following guidelines:
Such a function must be defined with the macro
<code>tree-buffer-defpopup-command</code>! This macro defines a new
popup-command whereas the newly defined command gets one argument
<var>NODE</var>. See the docstring of <code>tree-buffer-defpopup-command</code>
for further details.
</p>
<p>Example for the definition of such a menu-function:
</p>
<div class="example">
<pre class="example">(tree-buffer-defpopup-command ecb-my-special-dir-popup-function
  &quot;Prints the name of the directory of the node under point.&quot;
  (let ((node-data=dir (tree-node-get-data node)))
     (message ``Dir under node: %s'' node-data=dir)))
</pre></div>

<p>Per default the static user-extensions are added at the beginning of
the built-in menu-entries of <code>ecb-directories-menu</code> but the whole
menu can be re-arranged with <code>ecb-directories-menu-sorter</code>.
</p>
<p>These menu-extensions are static. A dynamic menu-extension can be
achieved via <code>ecb-directories-menu-user-extension-function</code>.
</p></dd></dl>

<dl>
<dt><a name="index-directories_002dmenu_002duser_002dextension_002dfunction"></a>User Option: <strong>directories-menu-user-extension-function</strong></dt>
<dd><p>Dynamic user extensions for the popup-menu of the directories buffer.
A function which has to return a list in the same format like the
option <code>ecb-directories-menu-user-extension</code>. This function is
called when the user opens the popup-menu for the directories buffer.
</p>
<p>If no dynamically evaluated menu-extensions should be added to the
directories-buffer the function has to return nil. Therefore the
default-value of this option is <code>ignore</code>.
</p>
<p>Per default the dynamic user-extensions are added in front of the
static extensions of <code>ecb-directories-menu-user-extension</code> but
the whole menu can be re-arranged with
<code>ecb-directories-menu-sorter</code>.
</p></dd></dl>

<dl>
<dt><a name="index-directories_002dshow_002dnode_002dinfo"></a>User Option: <strong>directories-show-node-info</strong></dt>
<dd><p>When to display which node-info in the directories-buffer.
Define which node info should be displayed after moving the mouse
over a node (or after a shift click onto the node) in the
directories-buffer.
</p>
<p>You can define &ldquo;when&rdquo; a node-info should be displayed:
</p><ul class="no-bullet">
<li>- always: Node info is displayed by moving with the mouse over a node.
</li><li>- if-too-long: Node info is only displayed by moving with the mouse over a
node does not fit into the window-width of the tree-buffer window.
In the ECB directories buffer this means also if a node is shortend or if
the node has an alias (see <code>ecb-source-path</code>).
</li><li>- shift-click: Node info is only displayed after a shift click with the
primary mouse button onto the node.
</li><li>- never: Node info is never displayed.
</li></ul>

<p>You can define &ldquo;which&rdquo; info should be displayed:
</p><ul class="no-bullet">
<li>- name: Only the full node-name is displayed.
</li><li>- path: The full-path of the node is displayed.
</li></ul>

<p>Do NOT set this option directly via setq but use always customize!
</p></dd></dl>

<dl>
<dt><a name="index-display_002ddefault_002ddir_002dafter_002dstart"></a>User Option: <strong>display-default-dir-after-start</strong></dt>
<dd><p>Automatically display current default-directory after activating ECB.
</p>
<p>If a file-buffer is displayed in the current active edit-window then
ECB synchronizes its basic tree-buffers to this file-buffer - at least if
the option <code>ecb-basic-buffer-sync</code> it not nil. So for this situation
<code>ecb-display-default-dir-after-start</code> takes no effect but this
option is for the case if no file-buffer is displayed in the
edit-window after startup:
</p>
<p>If true then ECB selects autom. the current default-directory after
activation even if no file-buffer is displayed in the current active
edit-window. This is useful if ECB is autom. activated after startup
of Emacs and Emacs is started without a file-argument. So the
directory from which the startup has performed is auto. selected in
the ECB-directories buffer and the ECB-sources buffer displays the
contents of this directory.
</p></dd></dl>


<dl>
<dt><a name="index-excluded_002ddirectories_002dregexps"></a>User Option: <strong>excluded-directories-regexps</strong></dt>
<dd><p>Directories that should not be included in the directories list. The
value of this variable should be a list of regular expression.
</p></dd></dl>

<dl>
<dt><a name="index-prescan_002ddirectories_002dfor_002demptyness"></a>User Option: <strong>prescan-directories-for-emptyness</strong></dt>
<dd><p>Prescan directories for emptyness. ECB does this so directories are
displayed as empty in the directories-buffer even without
user-interaction (i.e. in previous ECB-versions the emptyness of a
directory has been first checked when the user has clicked onto a
directory). ECB optimizes this check as best as possible but if a
directory contains a lot of subdirectories which contain in turn a lot
of entries, then expanding such a directory or selecting it would take
of course more time as without this check - at least at the first time
(all following selects of a directory uses the cached information if
its subdirectories are empty or not). Therefore ECB performs this
check stealthy (see <code>ecb-stealthy-tasks-delay</code>) so normally there
should no performance-decrease or additional waiting-time for the
user. There is one exception: For remote directories (in the sense of
tramp, ange-ftp, or efs) this check can descrease performance even if
performed stealthy and interruptable. Therefore this option offers
three possible settings:
</p>
<ul>
<li> <code>t</code>
Switch on this feature

</li><li> <code>unless-remote</code>
Switch on this feature but not for remote directories. The term
&ldquo;remote&rdquo; means here directories which are used via tramp, ange-ftp
or efs. So mounted directories are counted not as remote directories
here even if such a directory is maybe hosted on a remote machine. But
normally only directories in a LAN are mounted so there should be no
performance-problems with such mounted directories.

</li><li> <code>nil</code>
Switch off this feature completely.
</li></ul>

<p>The option <code>ecb-prescan-directories-exclude-regexps</code> offers are
more fine granularity to exclude certain directories from this
prescan.
</p></dd></dl>

<dl>
<dt><a name="index-host_002daccessible_002dcheck_002dvalid_002dtime"></a>User Option: <strong>host-accessible-check-valid-time</strong></dt>
<dd><p>Time in seconds a cached accessible-state of a remote host is valid.
This option is a list where each element specifies how long for a
certain remote host the cached ping-state (i.e. if the host is
accessible or not) should be valid. During this time-intervall ECB
pings such a remote host only once, all other checks use the cached
value of that real check. But it the cached value is older than the
value of this option ECB will ping again.
</p>
<p>Per default ECB discards after 1 minute the cached ping-state of each
remote host. But if you are sure that a certain remote host is always
accessible (i.e. means in consequence that you are always online when
working with ECB and remote-paths) then add an entry to this option
with a high valid-interval.
</p>
<p>Examples: An entry (&ldquo;.*sourceforge.*&rdquo; . 3600) ensures that all
remote hosts machting the string &ldquo;sourceforge&rdquo; will only once pinged
during one hour. Or (&ldquo;.*&rdquo; . 300) would ensure that every remote host
would be pinged only once during 5 minutes.
</p></dd></dl>

<dl>
<dt><a name="index-ping_002doptions"></a>User Option: <strong>ping-options</strong></dt>
<dd><p>List of options for the ping program. These options can be used to
limit how many ICMP packets are emitted. Ping is used to test if a
remote host of a remote path (e.g. a tramp-, ange-ftp- or efs-path) is
accessible See also <code>ecb-ping-program</code>.
</p></dd></dl>

<dl>
<dt><a name="index-ping_002dprogram"></a>User Option: <strong>ping-program</strong></dt>
<dd><p>Program to send network test packets to a host. See also
<code>ecb-ping-options</code>.
</p></dd></dl>

<dl>
<dt><a name="index-prescan_002ddirectories_002dexclude_002dregexps"></a>User Option: <strong>prescan-directories-exclude-regexps</strong></dt>
<dd><p>Which directories should be excluded from the empty-prescan. If a
directory matches any of the regexps of this option it will not be
prescanned for emptyness - This option takes only effect if
<code>ecb-prescan-directories-for-emptyness</code> is not nil.
</p></dd></dl>


<dl>
<dt><a name="index-show_002dsources_002din_002ddirectories_002dbuffer"></a>User Option: <strong>show-sources-in-directories-buffer</strong></dt>
<dd><p>Show source files in directories buffer.
</p></dd></dl>

<dl>
<dt><a name="index-source_002dpath"></a>User Option: <strong>source-path</strong></dt>
<dd><p>Paths where to find code sources. Each path can have an optional alias
that is used as it&rsquo;s display name. If no alias is set, the path is
used as display name.
</p>
<p>Lisp-type of tis option: The value must be a list L whereas each
element of L is either
</p><ul class="no-bullet">
<li>- a simple string which has to be the full path of a directory (this
string is displayed in the directory-browser of ECB) or

</li><li>- a 2-elemet list whereas the first element is the full path of a
directory (string) and the second element is an arbitrary alias
(string) for this directory which is then displayed instead of the
underlying directory.
</li></ul>
</dd></dl>



<dl>
<dt><a name="index-use_002dspeedbar_002dinstead_002dnative_002dtree_002dbuffer"></a>User Option: <strong>use-speedbar-instead-native-tree-buffer</strong></dt>
<dd><p>If true then uses speedbar for directories, sources or methods. This
means that speedbar is integrated in the ECB-frame and is displayed in
that window normally displaying the standard ECB-directories-buffer,
ECB-sources-buffer or ECB-methods-buffer.
</p>
<p>This option takes effect in all layouts which contain either a
directory window, a sources window or a method window.
</p>
<p>This option can have four valid values:
</p><ul class="no-bullet">
<li>- <code>nil</code>: Do not use speedbar (default)
</li><li>- <code>dir</code>: Use speedbar instead of the standard directories-buffer
</li><li>- <code>source</code>: Use speedbar instead of the standard sources-buffer
</li><li>- <code>method</code>: Use speedbar instead of the standard methods-buffer
</li></ul>

<p>Note: For directories and sources a similar effect and usability is
available by setting this option to <code>nil</code> (or <code>method</code>) and
setting <code>ecb-show-sources-in-directories-buffer</code> to not
<code>nil</code>, because this combination displays also directories and
sources in one window.
</p>
<p><code>ecb-use-speedbar-instead-native-tree-buffer</code> is for people who
like the speedbar way handling directories and source-files or methods
and want it in conjunction with ECB.
</p></dd></dl>


<hr>
<div class="header">
<p>
Next: <a href="ecb_002dsources.html#ecb_002dsources" accesskey="n" rel="next">ecb-sources</a>, Previous: <a href="ecb_002dtree_002dbuffer.html#ecb_002dtree_002dbuffer" accesskey="p" rel="prev">ecb-tree-buffer</a>, Up: <a href="Customizable-options.html#Customizable-options" accesskey="u" rel="up">Customizable options</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html#Command-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
