<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>ECB - the Emacs Code Browser: A new tree-node</title>

<meta name="description" content="ECB - the Emacs Code Browser: A new tree-node">
<meta name="keywords" content="ECB - the Emacs Code Browser: A new tree-node">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="ecb.html#Top" rel="start" title="Top">
<link href="Command-Index.html#Command-Index" rel="index" title="Command Index">
<link href="Concept-Index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="tree_002dbuffer.html#tree_002dbuffer" rel="up" title="tree-buffer">
<link href="Updating-a-tree_002dbuffer.html#Updating-a-tree_002dbuffer" rel="next" title="Updating a tree-buffer">
<link href="A-new-tree_002dbuffer.html#A-new-tree_002dbuffer" rel="prev" title="A new tree-buffer">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="A-new-tree_002dnode"></a>
<div class="header">
<p>
Next: <a href="Updating-a-tree_002dbuffer.html#Updating-a-tree_002dbuffer" accesskey="n" rel="next">Updating a tree-buffer</a>, Previous: <a href="A-new-tree_002dbuffer.html#A-new-tree_002dbuffer" accesskey="p" rel="prev">A new tree-buffer</a>, Up: <a href="tree_002dbuffer.html#tree_002dbuffer" accesskey="u" rel="up">tree-buffer</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html#Command-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="How-to-create-a-new-tree_002dnode"></a>
<h4 class="subsection">11.3.3 How to create a new tree-node</h4>

<p>When a new tree-buffer has been created, then the most senseful
programming-task is adding some tree-nodes to it.
</p>
<a name="Content-of-a-tree_002dnode"></a>
<h4 class="subsubsection">11.3.3.1 Content of a tree-node</h4>

<p>A tree-node is an object which stores in special <em>slots</em> several
data necessary to link the node with other nodes, to display the node
and to hold some associated node-data (e.g. a tag created by the
semantic-library).
</p>
<p>A tree-node can have the following slots:
</p>
<dl compact="compact">
<dt><code><var>NAME</var></code></dt>
<dd><p>The name of the node. Regardless how the node is displayed; see
<var>SHRINK-NAME</var> and <var>DISPLAYED-NAME</var>.
</p>
</dd>
<dt><code><var>TYPE</var></code></dt>
<dd><p>The type of the node; must currently be an interger! The type is used
to classify the nodes, so for example all nodes of a certain type can
display the same popup-menu - see <code>tree-buffer-create</code> or <a href="A-new-tree_002dbuffer.html#A-new-tree_002dbuffer">A new tree-buffer</a> which parts of a tree-buffer are distinguished by
node-types.
</p>
</dd>
<dt><code><var>DATA</var></code></dt>
<dd><p>The data of the node; This can be any arbitrary emacs-lisp-object.
This slots holds that data asscociated with the node and represented
by the node in the tree-buffer. Example: Assume a tree-buffer
displaying a directory-tree where each node just displays as its name
the name of (sub)directories, but not the full path. The full path is
stored in the <var>DATA</var>-slot of a node so when clicking onto this
node the asscociated directory can be open for example in a
dired-buffer.
</p>
</dd>
<dt><code><var>EXPANDABLE</var></code></dt>
<dd><p>If not nil then the node is expandable means it has children.
</p>
</dd>
<dt><code><var>EXPANDED</var></code></dt>
<dd><p>If not nil then the node is currently expanded, means its
children are visible in the tree-buffers as subnodes of the node.
</p>
</dd>
<dt><code><var>PARENT</var></code></dt>
<dd><p>The parent tree-node. This is the link to the father (rsp. mother ;-)
of the node. It must be a object of type tree-node!
</p>
</dd>
<dt><code><var>CHILDREN</var></code></dt>
<dd><p>List of children tree-nodes. They must be all objects of type
tree-node!
</p>
</dd>
<dt><code><var>SHRINK-NAME</var></code></dt>
<dd><p>Decides if the <var>NAME</var> can be shortened when displayed in a narrow
tree buffer window. The following values are valid:
</p>
<ul class="no-bullet">
<li>- <code>beginning</code>:
The <var>NAME</var> is truncated at the beginning so the end is always
visible.

</li><li>- <code>end</code>:
The <var>NAME</var> is truncated at the end. If the tree-node is EXPANDABLE
the name is truncated so that the expand symbol is visible.

</li><li>- <code>nil</code>:
The <var>NAME</var> is never truncated. In this case <var>DISPLAYED-NAME</var>
is equal to <var>NAME</var>.
</li></ul>

</dd>
<dt><code><var>INDENTSTR</var></code></dt>
<dd><p>Containes the full indentation-string for the node. So a single node
can easily be redrawn.
</p>
</dd>
<dt><code><var>DISPLAYED-NAME</var></code></dt>
<dd><p>Contains the current displayed name of the node. The
displayed name can be different from the <var>NAME</var> according to the value of
<var>SHRINK-NAME</var>.
</p>
</dd>
</dl>

<a name="Creating-a-new-tree_002dnode-and-adding-it-to-the-tree"></a>
<h4 class="subsubsection">11.3.3.2 Creating a new tree-node and adding it to the tree</h4>

<p>A new tree-node has to be created with the function
<code>tree-node-new</code>. This &ldquo;constructor&rdquo; accepts the following
parameter: <var>NAME</var>, <var>TYPE</var>, <var>DATA</var>, <var>NOT-EXPANDABLE</var>,
<var>PARENT</var> and <var>SHRINK-NAME</var>.
</p>
<p>For all parameters except <var>NOT-EXPANDABLE</var> the description is
available in the slot-description in the section above. If
<var>NOT-EXPANDABLE</var> is set to not nil then the slot <var>EXPANDABLE</var>
will be set to <code>nil</code>; otherwise to <code>t</code>.
</p>
<p><code>tree-node-new</code> returns a new tree-node.
</p>
<p>The new node can either being added implicitely to the tree via the
optional <var>PARENT</var>-parameter when calling <code>tree-buffer-new</code> or
explicitely by first creating the new node without setting the
parent-node but later setting the parent-node via the according
accessor (see next section below). Children should only being added
with <code>tree-node-add-children</code> - see next section.
</p>
<a name="Accessing-the-slots-of-a-tree_002dnode"></a>
<h4 class="subsubsection">11.3.3.3 Accessing the slots of a tree-node</h4>

<p>The section above shows which slots a tree-node have. 
</p>
<p>A slot with name XXX is getable with the following piece of code:
</p>
<div class="lisp">
<pre class="lisp">(tree-node-&gt;xxx &lt;a tree node&gt;)
</pre></div>

<p>Here is an example how to get the value of the slot <var>DATA</var>:
</p>
<div class="example">
<pre class="example">(tree-node-&gt;data &lt;a tree node&gt;)
</pre></div>

<p>A slot with name XXX is setable with the following piece of code:
</p>
<div class="lisp">
<pre class="lisp">(setf (tree-node-&gt;xxx &lt;a tree node&gt;) &lt;new value&gt;)
</pre></div>

<p>Again an example with slot <var>DATA</var> which sets this slot to the
string &ldquo;~/a_subdir_of_HOME&rdquo;:
</p>
<div class="example">
<pre class="example">(setf (tree-node-&gt;data &lt;a tree node&gt;) &quot;~/a_subdir_of_HOME&quot;)
</pre></div>

<p><strong>IMPORTANT</strong>: Adding new children to a node should always being
done with the function <code>tree-node-add-children</code> because this
functions encapsulates all the necessary stuff needed to add children
to a node (mainly adding the children itself and setting the node itself as
parent for every children).
</p>
<p>See <a href="The-tree_002dbuffer_002dAPI.html#The-tree_002dbuffer_002dAPI">The tree-buffer-API</a> for the rest of the API available for
tree-nodes.
</p>
<hr>
<div class="header">
<p>
Next: <a href="Updating-a-tree_002dbuffer.html#Updating-a-tree_002dbuffer" accesskey="n" rel="next">Updating a tree-buffer</a>, Previous: <a href="A-new-tree_002dbuffer.html#A-new-tree_002dbuffer" accesskey="p" rel="prev">A new tree-buffer</a>, Up: <a href="tree_002dbuffer.html#tree_002dbuffer" accesskey="u" rel="up">tree-buffer</a> &nbsp; [<a href="Concept-Index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html#Command-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
